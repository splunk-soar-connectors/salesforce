<!-- File: readme.html
  Copyright (c) 2017-2020 Splunk Inc.

  SPLUNK CONFIDENTIAL - Use or disclosure of this material in whole or in part
  without a valid written license from Splunk Inc. is PROHIBITED.
-->


<p>
In order to run any actions on this app, you must first authorize the use of this app by running test connectivity.
To pass test connectivity, you need to configure an app on Salesforce. First, copy the indicated URL in the screenshot below.
<a href="/app_resource/salesforce_6c1316b0-88a7-4864-b684-3170f6c455be/img/asset_config.png">
    <img src="/app_resource/salesforce_6c1316b0-88a7-4864-b684-3170f6c455be/img/asset_config.png">
</a><br>
Then, when you are creating a new connected app on Salesforce, select "Enable OAuth Settings", and be sure to fill it out like the picture below.
Paste the previous URL into the Callback URL section and append "/start_oauth" to the end.
<a href="/app_resource/salesforce_6c1316b0-88a7-4864-b684-3170f6c455be/img/app_config.png">
    <img src="/app_resource/salesforce_6c1316b0-88a7-4864-b684-3170f6c455be/img/app_config.png">
</a>
It is important to set the correct scopes as well.<br><br>
Now when you run test connectivity, a link will appear in the modal. Copy this and open it in a new tab.
<a href="/app_resource/salesforce_6c1316b0-88a7-4864-b684-3170f6c455be/img/modal.png">
    <img src="/app_resource/salesforce_6c1316b0-88a7-4864-b684-3170f6c455be/img/modal.png">
</a>
Here, you will be directed to login to Salesforce, then authorize the app usage. After that, you can close the tab when instructed to,
and test connectivity should successfully finish.<br>
</p>
<p>
If you optionally specify username and password in the configuration, test connectivity will work differently;
the main difference being that you will not need to manually login to Salesforce to authorize the app. 
<b>The password field should be composed of your password with your account's security token appended at the end, 
for example: MyPasswordMyToken</b> (this is not the same as the <b>client_secret</b>). 
If you wish to connect over a proxy, you should use this method.
</p>
<br>
<p>
It is possible that you will want to configure an asset to work with a Salesforce test environment. This is the case if login URL for
that Salesforce instance is <a href="https://test.salesforce.com">https://test.salesforce.com</a> as opposed to
<a href="https://login.salesforce.com">https://login.salesforce.com</a>. In this case, you should check the appropriate box in the
asset config.
</p>

<h3>Ingestion</h3>
<p>
In order to ingest, you must use a List View as a source.
</p>
<p>
The created artifact's CEF fields will be the same names as the fields in the Object in Salesforce. You may want to map these to standard
CEF fields. This can be done by providing a JSON which describes the mapping. For example, if the Salesforce object has the field
<b>ip_address__c</b>, and you want this to be <b>sourceAddress</b>, the following file would be appropriate.
<pre class="shell">
<code>
{
    "ip_address__c": "sourceAddress"
}
</code>
</pre>
